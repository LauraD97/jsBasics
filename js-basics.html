<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda en Línea</title>
</head>
<body>
  <h1>Simulador de Tienda en Línea</h1>

  <script>
    //1. Variables/Tipos de datos
    const productos = [
      {id: 1, nombre: "Camiseta", precio: 15},
      {id: 2, nombre: "Pantlón", precio: 20},
      {id: 3, nombre: "Zapatos", precio: 50}
    ];

    let carrito = [];
    let total = 0;

    //2. Funciones 
    function mostrarProductos() {
      console.log("Productos disponibles: ");
      productos.forEach((producto) => {
        console.log(`${producto.id}. ${producto.nombre} -$${producto.precio}`);
      });
    }

    function agregarAlCarrito(idProducto) {
      const producto = productos.find((p) => p.id === idProducto);

      if(producto) {
        carrito.push(producto);
        console.log("Producto agregado al carrito");
      } else {
        console.log("Producto no encontrado");
      }
    }

    function calcularTotal() {
      total = carrito.reduce((acum, producto) => acum + producto.precio, 0);
      console.log("Total: " + total);
    }

    //4. Promesas
    function procesarPedido() {
      return new Promise((resolve, reject) => {
        if (carrito.length === 0) {
          reject("El carrito está vacío.");
        } else {
          setTimeout(() => {
            resolve("Pedido procesado con éxito");
          }, 2000);
        }
      });
    }

    //3. Ciclos y condicionales 
    async function simulador () {
      console.log("Bienvenido a la tienda virtual");

      while(true) {
      console.log("\nOpciones:");
      console.log("1. Ver productos");
      console.log("2. Agregar producto al carrito");
      console.log("3. Ver total del carrito");
      console.log("4. Procesar pedido");
      console.log("5. Salir");

      const option = parseInt(prompt("selección una opción: "));

      switch(option) {
        case 1:
          mostrarProductos();
          break;
        
        case 2:
          const idProducto = parseInt(prompt("Ingresa el ID del producto: "));
          agregarAlCarrito(idProducto);
          break;
        
        case 3:
          calcularTotal();
          break;

        case 4:
          try {
            const mensaje = await procesarPedido();
            console.log(mensaje);
            break;
          } catch(error) {
            console.error(error);
          }
        break;

        case 5: 
        console("Gracias por visitar nuestra tienda");
        break;

        default:
          console.log("Opción no válida");
          break;
      }
    }
    }

    simulador();
  </script>
</body>
</html>